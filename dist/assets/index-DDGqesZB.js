(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const an=!1;var At=Array.isArray,ss=Array.prototype.indexOf,xr=Array.from,Xt=Object.defineProperty,St=Object.getOwnPropertyDescriptor,ln=Object.getOwnPropertyDescriptors,as=Object.prototype,is=Array.prototype,Er=Object.getPrototypeOf,Mr=Object.isExtensible;const tt=()=>{};function ls(e){return e()}function Nt(e){for(var t=0;t<e.length;t++)e[t]()}function os(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}function us(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const Ee=2,Cr=4,sr=8,qt=16,We=32,dt=64,on=128,qe=256,er=512,ce=1024,Pe=2048,Ke=4096,Ie=8192,mt=16384,Rr=32768,Ar=65536,zr=1<<17,cs=1<<18,Bt=1<<19,un=1<<20,br=1<<21,qr=1<<22,ot=1<<23,Ve=Symbol("$state"),fs=Symbol("legacy props"),vs=Symbol(""),Gr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ds(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function ar(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ms(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ps(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _s(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function hs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bs(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function ys(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ws(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ss(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ks(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const ir=1,lr=2,cn=4,Ts=8,xs=16,Es=1,Cs=2,Rs=4,As=8,qs=16,Gs=1,Ps=2,ue=Symbol(),$s="http://www.w3.org/1999/xhtml";function Is(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let js=!1;function fn(e){return e===this.v}function vn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function dn(e){return!vn(e,this.v)}let Gt=!1,Ds=!1;function Os(){Gt=!0}let ee=null;function tr(e){ee=e}function pe(e,t=!1,r){ee={p:ee,c:null,e:null,s:e,x:null,l:Gt&&!t?{s:null,u:null,$:[]}:null}}function _e(e){var t=ee,r=t.e;if(r!==null){t.e=null;for(var n of r)Rn(n)}return ee=t.p,{}}function Vt(){return!Gt||ee!==null&&ee.l===null}const Ns=new WeakMap;function Ls(e){var t=H;if(t===null)return W.f|=ot,e;if((t.f&Rr)===0){if((t.f&on)===0)throw!t.parent&&e instanceof Error&&mn(e),e;t.b.error(e)}else Pr(e,t)}function Pr(e,t){for(;t!==null;){if((t.f&on)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&mn(e),e}function mn(e){const t=Ns.get(e);t&&(Xt(e,"message",{value:t.message}),Xt(e,"stack",{value:t.stack}))}let Xe=[],rr=[];function pn(){var e=Xe;Xe=[],Nt(e)}function Ms(){var e=rr;rr=[],Nt(e)}function zs(){return Xe.length>0||rr.length>0}function or(e){if(Xe.length===0&&!Dt){var t=Xe;queueMicrotask(()=>{t===Xe&&pn()})}Xe.push(e)}function Fs(){Xe.length>0&&pn(),rr.length>0&&Ms()}function Us(){const e=H.b;return e===null&&ds(),e}function Ht(e){var t=Ee|Pe,r=W!==null&&(W.f&Ee)!==0?W:null;return H===null||r!==null&&(r.f&qe)!==0?t|=qe:H.f|=Bt,{ctx:ee,deps:null,effects:null,equals:fn,f:t,fn:e,reactions:null,rv:0,v:ue,wv:0,parent:r??H,ac:null}}function Bs(e,t){let r=H;r===null&&ms();var n=r.b,s=void 0,i=Lt(ue),l=null,u=!W;return sa(()=>{try{var o=e();l&&Promise.resolve(o).catch(()=>{})}catch(_){o=Promise.reject(_)}var c=()=>o;s=l?.then(c,c)??Promise.resolve(o),l=s;var v=re,m=n.is_pending();u&&(n.update_pending_count(1),m||v.increment());const p=(_,f=void 0)=>{l=null,m||v.activate(),f?f!==Gr&&(i.f|=ot,Et(i,f)):((i.f&ot)!==0&&(i.f^=ot),Et(i,_)),u&&(n.update_pending_count(-1),m||v.decrement()),hn()};if(s.then(p,_=>p(null,_||"unknown")),v)return()=>{queueMicrotask(()=>v.neuter())}}),new Promise(o=>{function c(v){function m(){v===s?o(i):c(s)}v.then(m,m)}c(s)})}function Vs(e){const t=Ht(e);return Dn(t),t}function $e(e){const t=Ht(e);return t.equals=dn,t}function _n(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ye(t[r])}}function Hs(e){for(var t=e.parent;t!==null;){if((t.f&Ee)===0)return t;t=t.parent}return null}function $r(e){var t,r=H;nt(Hs(e));try{_n(e),t=Mn(e)}finally{nt(r)}return t}function gn(e){var t=$r(e);if(e.equals(t)||(e.v=t,e.wv=Nn()),!pt){var r=(et||(e.f&qe)!==0)&&e.deps!==null?Ke:ce;be(e,r)}}function Ys(e,t,r){const n=Vt()?Ht:$e;if(t.length===0){r(e.map(n));return}var s=re,i=H,l=Ws(),u=Us();Promise.all(t.map(o=>Bs(o))).then(o=>{s?.activate(),l();try{r([...e.map(n),...o])}catch(c){(i.f&mt)===0&&Pr(c,i)}s?.deactivate(),hn()}).catch(o=>{u.error(o)})}function Ws(){var e=H,t=W,r=ee,n=re;return function(){nt(e),Me(t),tr(r),n?.activate()}}function hn(){nt(null),Me(null),tr(null)}const mr=new Set;let re=null,Jt=null,Fr=new Set,vt=[],ur=null,yr=!1,Dt=!1;class Tt{current=new Map;#o=new Map;#s=new Set;#e=0;#u=null;#c=!1;#r=[];#a=[];#n=[];#t=[];#i=[];#f=[];#v=[];skipped_effects=new Set;process(t){vt=[],Jt=null;for(const s of t)this.#m(s);if(this.#r.length===0&&this.#e===0){this.#d();var r=this.#n,n=this.#t;this.#n=[],this.#t=[],this.#i=[],Jt=re,re=null,Ur(r),Ur(n),re===null?re=this:mr.delete(this),this.#u?.resolve()}else this.#l(this.#n),this.#l(this.#t),this.#l(this.#i);for(const s of this.#r)ct(s);for(const s of this.#a)ct(s);this.#r=[],this.#a=[]}#m(t){t.f^=ce;for(var r=t.first;r!==null;){var n=r.f,s=(n&(We|dt))!==0,i=s&&(n&ce)!==0,l=i||(n&Ie)!==0||this.skipped_effects.has(r);if(!l&&r.fn!==null){if(s)r.f^=ce;else if((n&Cr)!==0)this.#t.push(r);else if((n&ce)===0)if((n&qr)!==0){var u=r.b?.is_pending()?this.#a:this.#r;u.push(r)}else Yt(r)&&((r.f&qt)!==0&&this.#i.push(r),ct(r));var o=r.first;if(o!==null){r=o;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)r=c.next,c=c.parent}}#l(t){for(const r of t)((r.f&Pe)!==0?this.#f:this.#v).push(r),be(r,ce);t.length=0}capture(t,r){this.#o.has(t)||this.#o.set(t,r),this.current.set(t,t.v)}activate(){re=this}deactivate(){re=null,Jt=null;for(const t of Fr)if(Fr.delete(t),t(),re!==null)break}neuter(){this.#c=!0}flush(){vt.length>0?bn():this.#d(),re===this&&(this.#e===0&&mr.delete(this),this.deactivate())}#d(){if(!this.#c)for(const t of this.#s)t();this.#s.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#f)be(t,Pe),xt(t);for(const t of this.#v)be(t,Ke),xt(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#s.add(t)}settled(){return(this.#u??=os()).promise}static ensure(){if(re===null){const t=re=new Tt;mr.add(re),Dt||Tt.enqueue(()=>{re===t&&t.flush()})}return re}static enqueue(t){or(t)}}function Ks(e){var t=Dt;Dt=!0;try{for(var r;;){if(Fs(),vt.length===0&&!zs()&&(re?.flush(),vt.length===0))return ur=null,r;bn()}}finally{Dt=t}}function bn(){var e=kt;yr=!0;try{var t=0;for(Hr(!0);vt.length>0;){var r=Tt.ensure();if(t++>1e3){var n,s;Js()}r.process(vt),rt.clear()}}finally{yr=!1,Hr(e),ur=null}}function Js(){try{hs()}catch(e){Pr(e,ur)}}let lt=null;function Ur(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(mt|Ie))===0&&Yt(n)&&(lt=[],ct(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?$n(n):n.fn=null),lt?.length>0)){rt.clear();for(const s of lt)ct(s);lt=[]}}lt=null}}function xt(e){for(var t=ur=e;t.parent!==null;){t=t.parent;var r=t.f;if(yr&&t===H&&(r&qt)!==0)return;if((r&(dt|We))!==0){if((r&ce)===0)return;t.f^=ce}}vt.push(t)}const rt=new Map;function Lt(e,t){var r={f:0,v:e,reactions:null,equals:fn,rv:0,wv:0};return r}function Qe(e,t){const r=Lt(e);return Dn(r),r}function R(e,t=!1,r=!0){const n=Lt(e);return t||(n.equals=dn),Gt&&r&&ee!==null&&ee.l!==null&&(ee.l.s??=[]).push(n),n}function b(e,t,r=!1){W!==null&&(!Le||(W.f&zr)!==0)&&Vt()&&(W.f&(Ee|qt|qr|zr))!==0&&!He?.includes(e)&&ks();let n=r?wt(t):t;return Et(e,n)}function Et(e,t){if(!e.equals(t)){var r=e.v;pt?rt.set(e,t):rt.set(e,r),e.v=t;var n=Tt.ensure();n.capture(e,r),(e.f&Ee)!==0&&((e.f&Pe)!==0&&$r(e),be(e,(e.f&qe)===0?ce:Ke)),e.wv=Nn(),wn(e,Pe),Vt()&&H!==null&&(H.f&ce)!==0&&(H.f&(We|dt))===0&&(Ae===null?ua([e]):Ae.push(e))}return t}function yn(e,t=1){var r=a(e),n=t===1?r++:r--;return b(e,r),n}function pr(e){b(e,e.v+1)}function wn(e,t){var r=e.reactions;if(r!==null)for(var n=Vt(),s=r.length,i=0;i<s;i++){var l=r[i],u=l.f;if(!(!n&&l===H)){var o=(u&Pe)===0;o&&be(l,t),(u&Ee)!==0?wn(l,Ke):o&&((u&qt)!==0&&lt!==null&&lt.push(l),xt(l))}}}function wt(e){if(typeof e!="object"||e===null||Ve in e)return e;const t=Er(e);if(t!==as&&t!==is)return e;var r=new Map,n=At(e),s=Qe(0),i=ut,l=u=>{if(ut===i)return u();var o=W,c=ut;Me(null),Wr(i);var v=u();return Me(o),Wr(c),v};return n&&r.set("length",Qe(e.length)),new Proxy(e,{defineProperty(u,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ws();var v=r.get(o);return v===void 0?v=l(()=>{var m=Qe(c.value);return r.set(o,m),m}):b(v,c.value,!0),!0},deleteProperty(u,o){var c=r.get(o);if(c===void 0){if(o in u){const v=l(()=>Qe(ue));r.set(o,v),pr(s)}}else b(c,ue),pr(s);return!0},get(u,o,c){if(o===Ve)return e;var v=r.get(o),m=o in u;if(v===void 0&&(!m||St(u,o)?.writable)&&(v=l(()=>{var _=wt(m?u[o]:ue),f=Qe(_);return f}),r.set(o,v)),v!==void 0){var p=a(v);return p===ue?void 0:p}return Reflect.get(u,o,c)},getOwnPropertyDescriptor(u,o){var c=Reflect.getOwnPropertyDescriptor(u,o);if(c&&"value"in c){var v=r.get(o);v&&(c.value=a(v))}else if(c===void 0){var m=r.get(o),p=m?.v;if(m!==void 0&&p!==ue)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(u,o){if(o===Ve)return!0;var c=r.get(o),v=c!==void 0&&c.v!==ue||Reflect.has(u,o);if(c!==void 0||H!==null&&(!v||St(u,o)?.writable)){c===void 0&&(c=l(()=>{var p=v?wt(u[o]):ue,_=Qe(p);return _}),r.set(o,c));var m=a(c);if(m===ue)return!1}return v},set(u,o,c,v){var m=r.get(o),p=o in u;if(n&&o==="length")for(var _=c;_<m.v;_+=1){var f=r.get(_+"");f!==void 0?b(f,ue):_ in u&&(f=l(()=>Qe(ue)),r.set(_+"",f))}if(m===void 0)(!p||St(u,o)?.writable)&&(m=l(()=>Qe(void 0)),b(m,wt(c)),r.set(o,m));else{p=m.v!==ue;var w=l(()=>wt(c));b(m,w)}var x=Reflect.getOwnPropertyDescriptor(u,o);if(x?.set&&x.set.call(v,c),!p){if(n&&typeof o=="string"){var g=r.get("length"),y=Number(o);Number.isInteger(y)&&y>=g.v&&b(g,y+1)}pr(s)}return!0},ownKeys(u){a(s);var o=Reflect.ownKeys(u).filter(m=>{var p=r.get(m);return p===void 0||p.v!==ue});for(var[c,v]of r)v.v!==ue&&!(c in u)&&o.push(c);return o},setPrototypeOf(){Ss()}})}function Br(e){try{if(e!==null&&typeof e=="object"&&Ve in e)return e[Ve]}catch{}return e}function Qs(e,t){return Object.is(Br(e),Br(t))}var wr,It,Sn,kn,Tn;function Zs(){if(wr===void 0){wr=window,It=document,Sn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;kn=St(t,"firstChild").get,Tn=St(t,"nextSibling").get,Mr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Mr(r)&&(r.__t=void 0)}}function Pt(e=""){return document.createTextNode(e)}function Ct(e){return kn.call(e)}function cr(e){return Tn.call(e)}function d(e,t){return Ct(e)}function Ze(e,t){{var r=Ct(e);return r instanceof Comment&&r.data===""?cr(r):r}}function T(e,t=1,r=!1){let n=e;for(;t--;)n=cr(n);return n}function Xs(e){e.textContent=""}function xn(){return!1}let Vr=!1;function ea(){Vr||(Vr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function fr(e){var t=W,r=H;Me(null),nt(null);try{return e()}finally{Me(t),nt(r)}}function En(e,t,r,n=r){e.addEventListener(t,()=>fr(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),ea()}function Cn(e){H===null&&W===null&&gs(),W!==null&&(W.f&qe)!==0&&H===null&&_s(),pt&&ps()}function ta(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function ze(e,t,r,n=!0){var s=H;s!==null&&(s.f&Ie)!==0&&(e|=Ie);var i={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|Pe,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{ct(i),i.f|=Rr}catch(o){throw Ye(i),o}else t!==null&&xt(i);if(n){var l=i;if(r&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&Bt)===0&&(l=l.first),l!==null&&(l.parent=s,s!==null&&ta(l,s),W!==null&&(W.f&Ee)!==0&&(e&dt)===0)){var u=W;(u.effects??=[]).push(l)}}return i}function Ir(e){const t=ze(sr,null,!1);return be(t,ce),t.teardown=e,t}function Sr(e){Cn();var t=H.f,r=!W&&(t&We)!==0&&(t&Rr)===0;if(r){var n=ee;(n.e??=[]).push(e)}else return Rn(e)}function Rn(e){return ze(Cr|un,e,!1)}function ra(e){return Cn(),ze(sr|un,e,!0)}function na(e){Tt.ensure();const t=ze(dt|Bt,e,!0);return(r={})=>new Promise(n=>{r.outro?jr(t,()=>{Ye(t),n(void 0)}):(Ye(t),n(void 0))})}function An(e){return ze(Cr,e,!1)}function U(e,t){var r=ee,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=vr(()=>{e(),!n.ran&&(n.ran=!0,P(t))})}function Fe(){var e=ee;vr(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&ce)!==0&&be(r,Ke),Yt(r)&&ct(r),t.ran=!1}})}function sa(e){return ze(qr|Bt,e,!0)}function vr(e,t=0){return ze(sr|t,e,!0)}function X(e,t=[],r=[]){Ys(t,r,n=>{ze(sr,()=>e(...n.map(a)),!0)})}function qn(e,t=0){var r=ze(qt|t,e,!0);return r}function Mt(e,t=!0){return ze(We|Bt,e,!0,t)}function Gn(e){var t=e.teardown;if(t!==null){const r=pt,n=W;Yr(!0),Me(null);try{t.call(null)}finally{Yr(r),Me(n)}}}function Pn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&fr(()=>{s.abort(Gr)});var n=r.next;(r.f&dt)!==0?r.parent=null:Ye(r,t),r=n}}function aa(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&We)===0&&Ye(t),t=r}}function Ye(e,t=!0){var r=!1;(t||(e.f&cs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ia(e.nodes_start,e.nodes_end),r=!0),Pn(e,t&&!r),nr(e,0),be(e,mt);var n=e.transitions;if(n!==null)for(const i of n)i.stop();Gn(e);var s=e.parent;s!==null&&s.first!==null&&$n(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ia(e,t){for(;e!==null;){var r=e===t?null:cr(e);e.remove(),e=r}}function $n(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function jr(e,t){var r=[];Dr(e,r,!0),In(r,()=>{Ye(e),t&&t()})}function In(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function Dr(e,t,r){if((e.f&Ie)===0){if(e.f^=Ie,e.transitions!==null)for(const l of e.transitions)(l.is_global||r)&&t.push(l);for(var n=e.first;n!==null;){var s=n.next,i=(n.f&Ar)!==0||(n.f&We)!==0;Dr(n,t,i?r:!1),n=s}}}function Or(e){jn(e,!0)}function jn(e,t){if((e.f&Ie)!==0){e.f^=Ie,(e.f&ce)===0&&(be(e,Pe),xt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Ar)!==0||(r.f&We)!==0;jn(r,s?t:!1),r=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let yt=null;function la(e){var t=yt;try{if(yt=new Set,P(e),t!==null)for(var r of yt)t.add(r);return yt}finally{yt=t}}function oa(e){for(var t of la(e))Et(t,t.v)}let kt=!1;function Hr(e){kt=e}let pt=!1;function Yr(e){pt=e}let W=null,Le=!1;function Me(e){W=e}let H=null;function nt(e){H=e}let He=null;function Dn(e){W!==null&&(He===null?He=[e]:He.push(e))}let ge=null,xe=0,Ae=null;function ua(e){Ae=e}let On=1,zt=0,ut=zt;function Wr(e){ut=e}let et=!1;function Nn(){return++On}function Yt(e){var t=e.f;if((t&Pe)!==0)return!0;if((t&Ke)!==0){var r=e.deps,n=(t&qe)!==0;if(r!==null){var s,i,l=(t&er)!==0,u=n&&H!==null&&!et,o=r.length;if((l||u)&&(H===null||(H.f&mt)===0)){var c=e,v=c.parent;for(s=0;s<o;s++)i=r[s],(l||!i?.reactions?.includes(c))&&(i.reactions??=[]).push(c);l&&(c.f^=er),u&&v!==null&&(v.f&qe)===0&&(c.f^=qe)}for(s=0;s<o;s++)if(i=r[s],Yt(i)&&gn(i),i.wv>e.wv)return!0}(!n||H!==null&&!et)&&be(e,ce)}return!1}function Ln(e,t,r=!0){var n=e.reactions;if(n!==null&&!He?.includes(e))for(var s=0;s<n.length;s++){var i=n[s];(i.f&Ee)!==0?Ln(i,t,!1):t===i&&(r?be(i,Pe):(i.f&ce)!==0&&be(i,Ke),xt(i))}}function Mn(e){var t=ge,r=xe,n=Ae,s=W,i=et,l=He,u=ee,o=Le,c=ut,v=e.f;ge=null,xe=0,Ae=null,et=(v&qe)!==0&&(Le||!kt||W===null),W=(v&(We|dt))===0?e:null,He=null,tr(e.ctx),Le=!1,ut=++zt,e.ac!==null&&(fr(()=>{e.ac.abort(Gr)}),e.ac=null);try{e.f|=br;var m=e.fn,p=m(),_=e.deps;if(ge!==null){var f;if(nr(e,xe),_!==null&&xe>0)for(_.length=xe+ge.length,f=0;f<ge.length;f++)_[xe+f]=ge[f];else e.deps=_=ge;if(!et||(v&Ee)!==0&&e.reactions!==null)for(f=xe;f<_.length;f++)(_[f].reactions??=[]).push(e)}else _!==null&&xe<_.length&&(nr(e,xe),_.length=xe);if(Vt()&&Ae!==null&&!Le&&_!==null&&(e.f&(Ee|Ke|Pe))===0)for(f=0;f<Ae.length;f++)Ln(Ae[f],e);return s!==null&&s!==e&&(zt++,Ae!==null&&(n===null?n=Ae:n.push(...Ae))),(e.f&ot)!==0&&(e.f^=ot),p}catch(w){return Ls(w)}finally{e.f^=br,ge=t,xe=r,Ae=n,W=s,et=i,He=l,tr(u),Le=o,ut=c}}function ca(e,t){let r=t.reactions;if(r!==null){var n=ss.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&Ee)!==0&&(ge===null||!ge.includes(t))&&(be(t,Ke),(t.f&(qe|er))===0&&(t.f^=er),_n(t),nr(t,0))}function nr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ca(e,r[n])}function ct(e){var t=e.f;if((t&mt)===0){be(e,ce);var r=H,n=kt;H=e,kt=!0;try{(t&qt)!==0?aa(e):Pn(e),Gn(e);var s=Mn(e);e.teardown=typeof s=="function"?s:null,e.wv=On;var i;an&&Ds&&(e.f&Pe)!==0&&e.deps}finally{kt=n,H=r}}}async function fa(){await Promise.resolve(),Ks()}function a(e){var t=e.f,r=(t&Ee)!==0;if(yt?.add(e),W!==null&&!Le){var n=H!==null&&(H.f&mt)!==0;if(!n&&!He?.includes(e)){var s=W.deps;if((W.f&br)!==0)e.rv<zt&&(e.rv=zt,ge===null&&s!==null&&s[xe]===e?xe++:ge===null?ge=[e]:(!et||!ge.includes(e))&&ge.push(e));else{(W.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[W]:i.includes(W)||i.push(W)}}}else if(r&&e.deps===null&&e.effects===null){var l=e,u=l.parent;u!==null&&(u.f&qe)===0&&(l.f^=qe)}if(pt){if(rt.has(e))return rt.get(e);if(r){l=e;var o=l.v;return((l.f&ce)===0&&l.reactions!==null||zn(l))&&(o=$r(l)),rt.set(l,o),o}}else r&&(l=e,Yt(l)&&gn(l));if((e.f&ot)!==0)throw e.v;return e.v}function zn(e){if(e.v===ue)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(rt.has(t)||(t.f&Ee)!==0&&zn(t))return!0;return!1}function P(e){var t=Le;try{return Le=!0,e()}finally{Le=t}}const va=-7169;function be(e,t){e.f=e.f&va|t}function he(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ve in e)kr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ve in r&&kr(r)}}}function kr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{kr(e[n],t)}catch{}const r=Er(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=ln(r);for(let s in n){const i=n[s].get;if(i)try{i.call(e)}catch{}}}}}const da=["touchstart","touchmove"];function ma(e){return da.includes(e)}const pa=new Set,Kr=new Set;function _a(e,t,r,n={}){function s(i){if(n.capture||jt.call(t,i),!i.cancelBubble)return fr(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?or(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function B(e,t,r,n,s){var i={capture:n,passive:s},l=_a(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ir(()=>{t.removeEventListener(e,l,i)})}let Jr=null;function jt(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;Jr=e;var l=0,u=Jr===e&&e.__root;if(u){var o=s.indexOf(u);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;o<=c&&(l=o)}if(i=s[l]||e.target,i!==t){Xt(e,"currentTarget",{configurable:!0,get(){return i||r}});var v=W,m=H;Me(null),nt(null);try{for(var p,_=[];i!==null;){var f=i.assignedSlot||i.parentNode||i.host||null;try{var w=i["__"+n];if(w!=null&&(!i.disabled||e.target===i))if(At(w)){var[x,...g]=w;x.apply(i,[e,...g])}else w.call(i,e)}catch(y){p?_.push(y):p=y}if(e.cancelBubble||f===t||f===null)break;i=f}if(p){for(let y of _)queueMicrotask(()=>{throw y});throw p}}finally{e.__root=t,delete e.currentTarget,Me(v),nt(m)}}}function Fn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ft(e,t){var r=H;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function L(e,t){var r=(t&Gs)!==0,n=(t&Ps)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=Fn(i?e:"<!>"+e),r||(s=Ct(s)));var l=n||Sn?document.importNode(s,!0):s.cloneNode(!0);if(r){var u=Ct(l),o=l.lastChild;Ft(u,o)}else Ft(l,l);return l}}function ga(e,t,r="svg"){var n=!e.startsWith("<!>"),s=`<${r}>${n?e:"<!>"+e}</${r}>`,i;return()=>{if(!i){var l=Fn(s),u=Ct(l);i=Ct(u)}var o=i.cloneNode(!0);return Ft(o,o),o}}function Nr(e,t){return ga(e,t,"svg")}function Qr(e=""){{var t=Pt(e+"");return Ft(t,t),t}}function it(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Pt();return e.append(t,r),Ft(t,r),e}function G(e,t){e!==null&&e.before(t)}function z(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function ha(e,t){return ba(e,t)}const ht=new Map;function ba(e,{target:t,anchor:r,props:n={},events:s,context:i,intro:l=!0}){Zs();var u=new Set,o=m=>{for(var p=0;p<m.length;p++){var _=m[p];if(!u.has(_)){u.add(_);var f=ma(_);t.addEventListener(_,jt,{passive:f});var w=ht.get(_);w===void 0?(document.addEventListener(_,jt,{passive:f}),ht.set(_,1)):ht.set(_,w+1)}}};o(xr(pa)),Kr.add(o);var c=void 0,v=na(()=>{var m=r??t.appendChild(Pt());return Mt(()=>{if(i){pe({});var p=ee;p.c=i}s&&(n.$$events=s),c=e(m,n)||{},i&&_e()}),()=>{for(var p of u){t.removeEventListener(p,jt);var _=ht.get(p);--_===0?(document.removeEventListener(p,jt),ht.delete(p)):ht.set(p,_)}Kr.delete(o),m!==r&&m.parentNode?.removeChild(m)}});return ya.set(c,v),c}let ya=new WeakMap;function K(e,t,r=!1){var n=e,s=null,i=null,l=ue,u=r?Ar:0,o=!1;const c=(_,f=!0)=>{o=!0,p(f,_)};var v=null;function m(){v!==null&&(v.lastChild.remove(),n.before(v),v=null);var _=l?s:i,f=l?i:s;_&&Or(_),f&&jr(f,()=>{l?i=null:s=null})}const p=(_,f)=>{if(l!==(l=_)){var w=xn(),x=n;if(w&&(v=document.createDocumentFragment(),v.append(x=Pt())),l?s??=f&&Mt(()=>f(x)):i??=f&&Mt(()=>f(x)),w){var g=re,y=l?s:i,h=l?i:s;y&&g.skipped_effects.delete(y),h&&g.skipped_effects.add(h),g.add_callback(m)}else m()}};qn(()=>{o=!1,t(c),o||p(null,null)},u)}function Ut(e,t){return t}function wa(e,t,r){for(var n=e.items,s=[],i=t.length,l=0;l<i;l++)Dr(t[l].e,s,!0);var u=i>0&&s.length===0&&r!==null;if(u){var o=r.parentNode;Xs(o),o.append(r),n.clear(),Ne(e,t[0].prev,t[i-1].next)}In(s,()=>{for(var c=0;c<i;c++){var v=t[c];u||(n.delete(v.k),Ne(e,v.prev,v.next)),Ye(v.e,!u)}})}function Rt(e,t,r,n,s,i=null){var l=e,u={flags:t,items:new Map,first:null},o=(t&cn)!==0;if(o){var c=e;l=c.appendChild(Pt())}var v=null,m=!1,p=new Map,_=$e(()=>{var g=r();return At(g)?g:g==null?[]:xr(g)}),f,w;function x(){Sa(w,f,u,p,l,s,t,n,r),i!==null&&(f.length===0?v?Or(v):v=Mt(()=>i(l)):v!==null&&jr(v,()=>{v=null}))}qn(()=>{w??=H,f=a(_);var g=f.length;if(!(m&&g===0)){m=g===0;var y,h,E,S;if(xn()){var k=new Set,$=re;for(h=0;h<g;h+=1){E=f[h],S=n(E,h);var N=u.items.get(S)??p.get(S);N?(t&(ir|lr))!==0&&Un(N,E,h,t):(y=Bn(null,u,null,null,E,S,h,s,t,r,!0),p.set(S,y)),k.add(S)}for(const[j,A]of u.items)k.has(j)||$.skipped_effects.add(A.e);$.add_callback(x)}else x();a(_)}})}function Sa(e,t,r,n,s,i,l,u,o){var c=(l&Ts)!==0,v=(l&(ir|lr))!==0,m=t.length,p=r.items,_=r.first,f=_,w,x=null,g,y=[],h=[],E,S,k,$;if(c)for($=0;$<m;$+=1)E=t[$],S=u(E,$),k=p.get(S),k!==void 0&&(k.a?.measure(),(g??=new Set).add(k));for($=0;$<m;$+=1){if(E=t[$],S=u(E,$),k=p.get(S),k===void 0){var N=n.get(S);if(N!==void 0){n.delete(S),p.set(S,N);var j=x?x.next:f;Ne(r,x,N),Ne(r,N,j),_r(N,j,s),x=N}else{var A=f?f.e.nodes_start:s;x=Bn(A,r,x,x===null?r.first:x.next,E,S,$,i,l,o)}p.set(S,x),y=[],h=[],f=x.next;continue}if(v&&Un(k,E,$,l),(k.e.f&Ie)!==0&&(Or(k.e),c&&(k.a?.unfix(),(g??=new Set).delete(k))),k!==f){if(w!==void 0&&w.has(k)){if(y.length<h.length){var O=h[0],q;x=O.prev;var D=y[0],J=y[y.length-1];for(q=0;q<y.length;q+=1)_r(y[q],O,s);for(q=0;q<h.length;q+=1)w.delete(h[q]);Ne(r,D.prev,J.next),Ne(r,x,D),Ne(r,J,O),f=O,x=J,$-=1,y=[],h=[]}else w.delete(k),_r(k,f,s),Ne(r,k.prev,k.next),Ne(r,k,x===null?r.first:x.next),Ne(r,x,k),x=k;continue}for(y=[],h=[];f!==null&&f.k!==S;)(f.e.f&Ie)===0&&(w??=new Set).add(f),h.push(f),f=f.next;if(f===null)continue;k=f}y.push(k),x=k,f=k.next}if(f!==null||w!==void 0){for(var ne=w===void 0?[]:xr(w);f!==null;)(f.e.f&Ie)===0&&ne.push(f),f=f.next;var ae=ne.length;if(ae>0){var F=(l&cn)!==0&&m===0?s:null;if(c){for($=0;$<ae;$+=1)ne[$].a?.measure();for($=0;$<ae;$+=1)ne[$].a?.fix()}wa(r,ne,F)}}c&&or(()=>{if(g!==void 0)for(k of g)k.a?.apply()}),e.first=r.first&&r.first.e,e.last=x&&x.e;for(var te of n.values())Ye(te.e);n.clear()}function Un(e,t,r,n){(n&ir)!==0&&Et(e.v,t),(n&lr)!==0?Et(e.i,r):e.i=r}function Bn(e,t,r,n,s,i,l,u,o,c,v){var m=(o&ir)!==0,p=(o&xs)===0,_=m?p?R(s,!1,!1):Lt(s):s,f=(o&lr)===0?l:Lt(l),w={i:f,v:_,k:i,a:null,e:null,prev:r,next:n};try{if(e===null){var x=document.createDocumentFragment();x.append(e=Pt())}return w.e=Mt(()=>u(e,_,f,c),js),w.e.prev=r&&r.e,w.e.next=n&&n.e,r===null?v||(t.first=w):(r.next=w,r.e.next=w.e),n!==null&&(n.prev=w,n.e.prev=w.e),w}finally{}}function _r(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==n;){var l=cr(i);s.before(i),i=l}}function Ne(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}const Zr=[...` 	
\r\f¬†\v\uFEFF`];function ka(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,l=0;(l=n.indexOf(s,l))>=0;){var u=l+i;(l===0||Zr.includes(n[l-1]))&&(u===n.length||Zr.includes(n[u]))?n=(l===0?"":n.substring(0,l))+n.substring(u+1):l=u}}return n===""?null:n}function Ta(e,t){return e==null?null:String(e)}function le(e,t,r,n,s,i){var l=e.__className;if(l!==r||l===void 0){var u=ka(r,n,i);u==null?e.removeAttribute("class"):e.className=u,e.__className=r}else if(i&&s!==i)for(var o in i){var c=!!i[o];(s==null||c!==!!s[o])&&e.classList.toggle(o,c)}return i}function Vn(e,t,r,n){var s=e.__style;if(s!==t){var i=Ta(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return n}function Hn(e,t,r=!1){if(e.multiple){if(t==null)return;if(!At(t))return Is();for(var n of e.options)n.selected=t.includes(Ot(n));return}for(n of e.options){var s=Ot(n);if(Qs(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function xa(e){var t=new MutationObserver(()=>{Hn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ir(()=>{t.disconnect()})}function Ea(e,t,r=t){var n=!0;En(e,"change",s=>{var i=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(i),Ot);else{var u=e.querySelector(i)??e.querySelector("option:not([disabled])");l=u&&Ot(u)}r(l)}),An(()=>{var s=t();if(Hn(e,s,n),n&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=Ot(i),r(s))}e.__value=s,n=!1}),xa(e)}function Ot(e){return"__value"in e?e.__value:e.value}const Ca=Symbol("is custom element"),Ra=Symbol("is html");function ft(e,t,r,n){var s=Aa(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[vs]=r),r==null?e.removeAttribute(t):typeof r!="string"&&qa(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Aa(e){return e.__attributes??={[Ca]:e.nodeName.includes("-"),[Ra]:e.namespaceURI===$s}}var Xr=new Map;function qa(e){var t=e.getAttribute("is")||e.nodeName,r=Xr.get(t);if(r)return r;Xr.set(t,r=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=ln(s);for(var l in n)n[l].set&&r.push(l);s=Er(s)}return r}function Qt(e,t,r=t){var n=new WeakSet;En(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=gr(e)?hr(i):i,r(i),re!==null&&n.add(re),await fa(),i!==(i=t())){var l=e.selectionStart,u=e.selectionEnd;e.value=i??"",u!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(u,e.value.length))}}),P(t)==null&&e.value&&(r(gr(e)?hr(e.value):e.value),re!==null&&n.add(re)),vr(()=>{var s=t();if(e===document.activeElement){var i=Jt??re;if(n.has(i))return}gr(e)&&s===hr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function gr(e){var t=e.type;return t==="number"||t==="range"}function hr(e){return e===""?null:+e}function en(e,t){return e===t||e?.[Ve]===t}function Wt(e={},t,r,n){return An(()=>{var s,i;return vr(()=>{s=i,i=[],P(()=>{e!==r(...i)&&(t(e,...i),s&&en(r(...s),e)&&t(null,...s))})}),()=>{or(()=>{i&&en(r(...i),e)&&t(null,...i)})}}),e}function Ga(e){return function(...t){var r=t[0];return r.stopPropagation(),e?.apply(this,t)}}function Yn(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function ye(e=!1){const t=ee,r=t.l.u;if(!r)return;let n=()=>he(t.s);if(e){let s=0,i={};const l=Ht(()=>{let u=!1;const o=t.s;for(const c in o)o[c]!==i[c]&&(i[c]=o[c],u=!0);return u&&s++,s});n=()=>a(l)}r.b.length&&ra(()=>{tn(t,n),Nt(r.b)}),Sr(()=>{const s=P(()=>r.m.map(ls));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Sr(()=>{tn(t,n),Nt(r.a)})}function tn(e,t){if(e.l.s)for(const r of e.l.s)a(r);t()}function Pa(e,t){var r=e.$$events?.[t.type],n=At(r)?r.slice():r==null?[]:[r];for(var s of n)s.call(this,t)}function Lr(e,t,r){if(e==null)return t(void 0),r&&r(void 0),tt;const n=P(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const bt=[];function $a(e,t){return{subscribe:Wn(e,t).subscribe}}function Wn(e,t=tt){let r=null;const n=new Set;function s(u){if(vn(e,u)&&(e=u,r)){const o=!bt.length;for(const c of n)c[1](),bt.push(c,e);if(o){for(let c=0;c<bt.length;c+=2)bt[c][0](bt[c+1]);bt.length=0}}}function i(u){s(u(e))}function l(u,o=tt){const c=[u,o];return n.add(c),n.size===1&&(r=t(s,i)||tt),u(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:l}}function Je(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return $a(r,(l,u)=>{let o=!1;const c=[];let v=0,m=tt;const p=()=>{if(v)return;m();const f=t(n?c[0]:c,l,u);i?l(f):m=typeof f=="function"?f:tt},_=s.map((f,w)=>Lr(f,x=>{c[w]=x,v&=~(1<<w),o&&p()},()=>{v|=1<<w}));return o=!0,p(),function(){Nt(_),m(),o=!1}})}function Zt(e){let t;return Lr(e,r=>t=r)(),t}let Kt=!1,Tr=Symbol();function Ge(e,t,r){const n=r[t]??={store:null,source:R(void 0),unsubscribe:tt};if(n.store!==e&&!(Tr in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=tt;else{var s=!0;n.unsubscribe=Lr(e,i=>{s?n.source.v=i:b(n.source,i)}),s=!1}return e&&Tr in r?Zt(e):a(n.source)}function $t(){const e={};function t(){Ir(()=>{for(var r in e)e[r].unsubscribe();Xt(e,Tr,{enumerable:!1,value:!0})})}return[e,t]}function Ia(e){var t=Kt;try{return Kt=!1,[e(),Kt]}finally{Kt=t}}function fe(e,t,r,n){var s=!Gt||(r&Cs)!==0,i=(r&As)!==0,l=(r&qs)!==0,u=n,o=!0,c=()=>(o&&(o=!1,u=l?P(n):n),u),v;if(i){var m=Ve in e||fs in e;v=St(e,t)?.set??(m&&t in e?h=>e[t]=h:void 0)}var p,_=!1;i?[p,_]=Ia(()=>e[t]):p=e[t],p===void 0&&n!==void 0&&(p=c(),v&&(s&&ys(),v(p)));var f;if(s?f=()=>{var h=e[t];return h===void 0?c():(o=!0,h)}:f=()=>{var h=e[t];return h!==void 0&&(u=void 0),h===void 0?u:h},s&&(r&Rs)===0)return f;if(v){var w=e.$$legacy;return(function(h,E){return arguments.length>0?((!s||!E||w||_)&&v(E?f():h),h):f()})}var x=!1,g=((r&Es)!==0?Ht:$e)(()=>(x=!1,f()));i&&a(g);var y=H;return(function(h,E){if(arguments.length>0){const S=E?a(g):s&&i?wt(h):h;return b(g,S),x=!0,u!==void 0&&(u=S),h}return pt&&x||(y.f&mt)!==0?g.v:a(g)})}function st(e){ee===null&&ar(),Gt&&ee.l!==null?Jn(ee).m.push(e):Sr(()=>{const t=P(e);if(typeof t=="function")return t})}function ja(e){ee===null&&ar(),st(()=>()=>P(e))}function Da(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Kn(){const e=ee;return e===null&&ar(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const i=At(s)?s.slice():[s],l=Da(t,r,n);for(const u of i)u.call(e.x,l);return!l.defaultPrevented}return!0}}function Oa(e){ee===null&&ar(),ee.l===null&&bs(),Jn(ee).a.push(e)}function Jn(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Na="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Na);Os();class La{baseUrl;constructor(t="http://localhost:3001"){this.baseUrl=t}async scoreTag(t){try{const r=await fetch(`${this.baseUrl}/api/scoring/score-tag?guess=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});return r.ok?await r.json():(console.warn(`Backend scoring failed: ${r.status} ${r.statusText}`),null)}catch(r){return console.warn("Backend scoring request failed:",r),null}}async checkTag(t){try{const r=await fetch(`${this.baseUrl}/api/tags/search?q=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});return r.ok?(await r.json()).found===!0:!1}catch(r){return console.warn("Backend tag check failed:",r),!1}}async healthCheck(){try{const t=new AbortController,r=setTimeout(()=>t.abort(),5e3),n=await fetch(`${this.baseUrl}/api/health`,{method:"GET",signal:t.signal});return clearTimeout(r),n.ok}catch(t){return console.warn("Backend health check failed:",t),!1}}}const rn=new La,Z=Wn({currentState:"home",currentSession:null,dailyChallenge:null,userStats:{gamesPlayed:0,totalScore:0,averageScore:0,bestScore:0,totalTagsGuessed:0,accuracyRate:0,favoriteCategories:[],dailyChallengesCompleted:0},settings:{soundEnabled:!0,theme:"dark",animations:!0,autoAdvanceRounds:!1}}),nn=Je(Z,e=>e.currentState),dr=Je(Z,e=>e.currentSession),Ma=Je(Z,e=>e.dailyChallenge),Qn=Je(Z,e=>e.userStats);Je(Z,e=>e.settings);const Zn=Je(Z,e=>!e.currentSession||e.currentSession.rounds.length===0?null:e.currentSession.rounds[e.currentSession.currentRound]||null),za=Je(Z,e=>e.currentSession?.isActive===!0),Fa=Je(Z,e=>e.currentSession?e.currentSession.currentRound<e.currentSession.rounds.length-1:!1);Je(Z,e=>e.currentSession?e.currentSession.currentRound===e.currentSession.rounds.length-1:!1);const me={navigateToHome(){Z.update(e=>({...e,currentState:"home"}))},navigateToSetup(){Z.update(e=>({...e,currentState:"setup"}))},startGame(e,t){const r=crypto.randomUUID(),n=new Date,s=t.slice(0,e.totalRounds).map(i=>({post:i,timeLimit:e.timeLimit,timeRemaining:e.timeLimit,correctGuesses:{},totalGuesses:0,incorrectGuesses:0,incorrectGuessTimestamps:[],score:0,startedAt:n}));Z.update(i=>({...i,currentSession:{id:r,settings:e,rounds:s,currentRound:0,totalScore:0,startedAt:n,isActive:!0},currentState:"countdown"})),setTimeout(()=>this.preloadCurrentRoundImage(),100)},async startRound(){await this.preloadCurrentRoundImage(),Z.update(e=>{if(!e.currentSession)return e;const t=e.currentSession.rounds[e.currentSession.currentRound];return t&&(t.startedAt=new Date,t.timeRemaining=t.timeLimit),{...e,currentState:"playing"}})},async submitGuess(e){const r=Zt(Z).currentSession;if(!r||!r.isActive)return{guess:e,score:0,isCorrect:!1};const n=r.rounds[r.currentRound];if(!n)return{guess:e,score:0,isCorrect:!1};const s=e.toLowerCase().trim(),l=Date.now()-1e4;if(n.incorrectGuessTimestamps.filter(m=>m>l).length>=5)return{guess:e,score:0,isCorrect:!1,rateLimited:!0};let o=null,c;for(const[m,p]of Object.entries(n.post.tags)){const _=m;if(p.some(f=>f.toLowerCase()===s)){o=p.find(f=>f.toLowerCase()===s)||null,c=_;break}}if(!o){try{const m=await rn.scoreTag(s);if(m&&m.isCorrect&&m.actualTag)for(const[p,_]of Object.entries(n.post.tags)){const f=p;if(_.some(w=>w.toLowerCase()===m.actualTag.toLowerCase()))return o=m.actualTag,c=f,await this.processCorrectGuess(e,o,c,m.score*.9,!0)}}catch(m){console.warn("Backend alias check failed:",m)}return this.processIncorrectGuess(e)}if(n.correctGuesses[c]?.some(m=>m.tag.toLowerCase()===o.toLowerCase()))return{guess:e,score:0,isCorrect:!1};try{const p=(await rn.scoreTag(o))?.score||this.fallbackScore(o,c);return this.processCorrectGuess(e,o,c,p,!1)}catch(m){console.warn("Backend scoring failed, using fallback:",m);const p=this.fallbackScore(o,c);return this.processCorrectGuess(e,o,c,p,!1)}},processCorrectGuess(e,t,r,n,s){return Z.update(i=>{const l=i.currentSession;if(!l||!l.isActive)return i;const u=l.rounds[l.currentRound];if(!u)return i;u.totalGuesses++;const o={tag:t,actualTag:s?t:void 0,score:Math.round(n),category:r,wasFromAlias:s};return u.correctGuesses[r]||(u.correctGuesses[r]=[]),u.correctGuesses[r].push(o),u.score+=o.score,l.totalScore+=o.score,i.userStats.totalTagsGuessed++,i}),{guess:e,actualTag:s?t:void 0,score:Math.round(n),isCorrect:!0,category:r,wasFromAlias:s}},processIncorrectGuess(e){return Z.update(t=>{const r=t.currentSession;if(!r||!r.isActive)return t;const n=r.rounds[r.currentRound];if(!n)return t;n.totalGuesses++,n.incorrectGuesses++,n.incorrectGuessTimestamps.push(Date.now());const s=Date.now()-1e4;return n.incorrectGuessTimestamps=n.incorrectGuessTimestamps.filter(i=>i>s),t}),{guess:e,score:0,isCorrect:!1}},fallbackScore(e,t){const r={general:100,artist:150,copyright:125,character:175,species:150,meta:75,lore:200,invalid:50};let n=0;for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)&4294967295;const s=Math.abs(n)%50;return r[t]+s},endRound(){Z.update(e=>{if(!e.currentSession)return e;const t=e.currentSession.rounds[e.currentSession.currentRound];return t&&(t.endedAt=new Date,t.timeRemaining=0),{...e,currentState:"roundSummary"}})},nextRound(){Z.update(e=>{if(!e.currentSession)return e;if(e.currentSession.currentRound<e.currentSession.rounds.length-1)return setTimeout(()=>this.preloadNextRoundImage(),1e3),{...e,currentSession:{...e.currentSession,currentRound:e.currentSession.currentRound+1},currentState:"countdown"};{const r=e.currentSession;return r.endedAt=new Date,r.isActive=!1,Ua(e,r),{...e,currentState:"gameSummary"}}})},resetGame(){Z.update(e=>({...e,currentSession:null,currentState:"home"}))},tickTimer(){Z.update(e=>{if(!e.currentSession||e.currentState!=="playing")return e;const t=e.currentSession.rounds[e.currentSession.currentRound];return t?(t.timeRemaining=Math.max(0,t.timeRemaining-1),t.timeRemaining===0?(t.endedAt=new Date,{...e,currentState:"roundSummary"}):e):e})},updateSettings(e){Z.update(t=>({...t,settings:{...t.settings,...e}})),Va()},setDailyChallenge(e){Z.update(t=>({...t,dailyChallenge:e}))},startDailyChallenge(){Z.update(e=>{if(!e.dailyChallenge)return e;const t={...e.dailyChallenge.settings,mode:"daily"},r=crypto.randomUUID(),n=new Date,s=e.dailyChallenge.posts.slice(0,t.totalRounds).map(i=>({post:i,timeLimit:t.timeLimit,timeRemaining:t.timeLimit,correctGuesses:{},totalGuesses:0,incorrectGuesses:0,incorrectGuessTimestamps:[],score:0,startedAt:n}));return{...e,currentSession:{id:`daily-${r}`,settings:t,rounds:s,currentRound:0,totalScore:0,startedAt:n,isActive:!0},currentState:"countdown"}})},restartWithSameSettings(){Z.update(e=>e.currentSession?{...e,currentSession:null,currentState:"setup"}:e)},async preloadImage(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(),n.onerror=()=>r(),n.src=e})},async preloadCurrentRoundImage(){const e=Zt(Z);if(!e.currentSession)return;const t=e.currentSession.rounds[e.currentSession.currentRound];if(!t)return;const r=t.post.sample?.url||t.post.file?.url;if(r)try{await this.preloadImage(r)}catch(n){console.warn("Failed to preload current round image:",n)}},async preloadNextRoundImage(){const e=Zt(Z);if(!e.currentSession)return;const t=e.currentSession.currentRound+1,r=e.currentSession.rounds[t];if(r){const n=r.post.sample?.url||r.post.file?.url;if(n)try{await this.preloadImage(n)}catch(s){console.warn("Failed to preload next round image:",s)}}}};function Ua(e,t){const r=e.userStats;r.gamesPlayed++,r.totalScore+=t.totalScore,r.averageScore=r.totalScore/r.gamesPlayed,t.totalScore>r.bestScore&&(r.bestScore=t.totalScore);const n=t.rounds.reduce((i,l)=>i+l.totalGuesses,0),s=t.rounds.reduce((i,l)=>i+Object.values(l.correctGuesses).flat().length,0);if(n>0){const i=s/n;r.accuracyRate=(r.accuracyRate*(r.gamesPlayed-1)+i)/r.gamesPlayed}}function Ba(){try{const e=localStorage.getItem("gameState");if(e){const t=JSON.parse(e);Z.update(r=>({...r,userStats:{...r.userStats,...t.userStats},settings:{...r.settings,...t.settings}}))}}catch(e){console.warn("Failed to load game state:",e)}}function Va(){try{Z.subscribe(e=>{localStorage.setItem("gameSettings",JSON.stringify(e.settings))})}catch(e){console.warn("Failed to save settings:",e)}}typeof window<"u"&&Ba();var Ha=L('<button class="daily-button svelte-114uy9q">üìÖ Daily Challenge <span class="daily-date svelte-114uy9q"> </span></button>'),Ya=L('<div class="modal-overlay svelte-114uy9q" role="button" tabindex="0"><div class="modal svelte-114uy9q" role="button" tabindex="0"><div class="modal-header svelte-114uy9q"><h2>Your Statistics</h2> <button class="close-button svelte-114uy9q">√ó</button></div> <div class="stats-grid svelte-114uy9q"><div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Games Played</div></div> <div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Best Score</div></div> <div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Average Score</div></div> <div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Tags Found</div></div> <div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Accuracy</div></div> <div class="stat-card svelte-114uy9q"><div class="stat-number svelte-114uy9q"> </div> <div class="stat-label svelte-114uy9q">Daily Challenges</div></div></div></div></div>'),Wa=L('<div class="home-screen svelte-114uy9q"><div class="hero svelte-114uy9q"><div class="mascot-container svelte-114uy9q"><img src="https://static1.e621.net/data/e3/7a/e37aa3f786602f4dc8020f93675376f2.gif" alt="Game mascot" class="mascot svelte-114uy9q"/> <div class="mascot-credit svelte-114uy9q">artist: tuwka</div></div> <header class="logo-header svelte-114uy9q"><h1 class="svelte-114uy9q">e621_guessr</h1> <span class="byline svelte-114uy9q">by awonomo and birch</span></header></div> <div class="menu svelte-114uy9q"><div class="menu-buttons svelte-114uy9q"><button class="primary-button svelte-114uy9q">üéÆ Play Game</button> <!> <button class="secondary-button svelte-114uy9q">üìä Statistics</button> <button class="secondary-button svelte-114uy9q">‚öôÔ∏è Settings</button></div></div> <!></div>');function sn(e,t){pe(t,!1);const r=()=>Ge(Ma,"$dailyChallenge",s),n=()=>Ge(Qn,"$userStats",s),[s,i]=$t();let l=R(!1);async function u(){try{const S=await fetch("/api/daily");if(S.ok){const k=await S.json();k.success&&me.setDailyChallenge(k.data)}}catch(S){console.error("Failed to load daily challenge:",S)}}st(()=>{u()});function o(){me.navigateToSetup()}function c(){me.startDailyChallenge()}function v(){b(l,!a(l))}ye();var m=Wa(),p=T(d(m),2),_=d(p),f=d(_),w=T(f,2);{var x=S=>{var k=Ha(),$=T(d(k)),N=d($);X(()=>z(N,r().date)),B("click",k,c),G(S,k)};K(w,S=>{r()&&S(x)})}var g=T(w,2),y=T(g,2),h=T(p,2);{var E=S=>{var k=Ya(),$=d(k),N=d($),j=T(d(N),2),A=T(N,2),O=d(A),q=d(O),D=d(q),J=T(O,2),ne=d(J),ae=d(ne),F=T(J,2),te=d(F),ve=d(te),de=T(F,2),Se=d(de),Ce=d(Se),ie=T(de,2),Re=d(ie),je=d(Re),De=T(ie,2),Oe=d(De),we=d(Oe);X((ke,Ue)=>{z(D,n().gamesPlayed),z(ae,n().bestScore),z(ve,ke),z(Ce,n().totalTagsGuessed),z(je,`${Ue??""}%`),z(we,n().dailyChallengesCompleted)},[()=>Math.round(n().averageScore),()=>Math.round(n().accuracyRate*100)]),B("click",j,v),B("click",$,Ga(function(ke){Pa.call(this,t,ke)})),B("click",k,v),G(S,k)};K(h,S=>{a(l)&&S(E)})}B("click",f,o),B("click",g,v),B("click",y,()=>alert("Coming soon!")),G(e,m),_e(),i()}var Ka=L('<button type="button"> </button>'),Ja=L('<div class="error-message svelte-14i971m"> </div>'),Qa=L('<div class="setup-screen svelte-14i971m"><div class="container svelte-14i971m"><header class="header svelte-14i971m"><button class="back-button svelte-14i971m">‚Üê Back</button> <h1 class="svelte-14i971m">Game Setup</h1></header> <form class="setup-form svelte-14i971m"><div class="form-grid svelte-14i971m"><div class="form-group svelte-14i971m"><label for="timeLimit" class="svelte-14i971m">Time Limit (seconds)</label> <input id="timeLimit" type="number" min="10" max="600" step="10" class="svelte-14i971m"/> <span class="help-text svelte-14i971m"> </span></div> <div class="form-group svelte-14i971m"><label for="gameMode" class="svelte-14i971m">Game Mode</label> <select id="gameMode" class="svelte-14i971m"><option>Classic - Tag Guessing</option><option>Time Attack (Coming Soon)</option><option>Endless Mode (Coming Soon)</option></select></div> <div class="form-group span-2 svelte-14i971m"><fieldset class="rating-fieldset svelte-14i971m"><legend class="svelte-14i971m">Content Rating</legend> <div class="rating-options svelte-14i971m"></div></fieldset></div> <div class="form-group svelte-14i971m"><label class="svelte-14i971m">Minimum Upvotes</label> <div class="upvotes-control svelte-14i971m"><div class="toggle-container svelte-14i971m"><button type="button"> </button></div> <div><input type="range" min="0" max="2000" step="25" class="upvotes-slider svelte-14i971m"/> <div class="slider-value svelte-14i971m"> </div></div></div> <span class="help-text svelte-14i971m"> </span></div> <div class="form-group svelte-14i971m"><label for="customCriteria" class="svelte-14i971m">Custom Tags (Optional)</label> <input id="customCriteria" type="text" placeholder="e.g., cat dog forest" maxlength="100" class="svelte-14i971m"/> <span class="help-text svelte-14i971m">Space-separated tags to include</span></div></div> <!> <div class="form-actions svelte-14i971m"><button type="button" class="secondary-button svelte-14i971m">Cancel</button> <button type="submit" class="primary-button svelte-14i971m"> </button></div></form></div></div>');function Za(e,t){pe(t,!1);let r=R(120),n=R("classic"),s=R({safe:!0,questionable:!1,explicit:!1}),i=R(250),l=R(!0),u=R(""),o=R(!1),c=R("");function v(I){const Y={...a(s)};Y[I]=!Y[I],Object.values(Y).some(Boolean)?b(s,Y):b(s,{safe:!0,questionable:!0,explicit:!0})}function m(){const I=[],Y=Object.entries(a(s)).filter(([,Q])=>Q).map(([Q])=>Q);if(Y.length===1){const Q={safe:"rating:s",questionable:"rating:q",explicit:"rating:e"};I.push(Q[Y[0]])}else if(Y.length===2){const oe=["safe","questionable","explicit"].find(se=>!Y.includes(se));if(oe){const se={safe:"-rating:s",questionable:"-rating:q",explicit:"-rating:e"};I.push(se[oe])}}return a(l)&&a(i)>0&&I.push(`score:>=${a(i)}`),I.push("-animated","-young","tagcount:>=50"),a(u).trim()&&I.push(a(u).trim()),I.join(" ")}async function p(){b(c,""),b(o,!0);try{const I=m(),Y=Object.entries(a(s)).filter(([,gt])=>gt).map(([gt])=>gt),Q=`/api/posts?limit=5&ratings=${Y.join(",")}&minScore=${a(i)}&customCriteria=${encodeURIComponent(a(u))}&tags=${encodeURIComponent("")}`;console.log("üîç Fetching posts with query:",I);const oe=await fetch(Q),se=await oe.json();if(!oe.ok||!se.success)throw new Error(se.error||"Failed to fetch posts");if(!se.data?.posts||se.data.posts.length===0)throw new Error("No posts found matching your criteria. Try different settings.");const _t={mode:a(n),timeLimit:a(r),totalRounds:Math.min(5,se.data.posts.length),ratings:Y,minUpvotes:a(i),customCriteria:a(u)};me.startGame(_t,se.data.posts)}catch(I){console.error("Failed to start game:",I),b(c,I instanceof Error?I.message:"Failed to start game. Please try again.")}finally{b(o,!1)}}function _(){me.navigateToHome()}U(()=>a(r),()=>{a(r)<10&&b(r,10)}),U(()=>a(r),()=>{a(r)>600&&b(r,600)}),U(()=>a(i),()=>{a(i)>2e3&&b(i,2e3)}),Fe(),ye();var f=Qa(),w=d(f),x=d(w),g=d(x),y=T(x,2),h=d(y),E=d(h),S=T(d(E),2),k=T(S,2),$=d(k),N=T(E,2),j=T(d(N),2);X(()=>{a(n),oa(()=>{})});var A=d(j);A.value=A.__value="classic";var O=T(A);O.value=O.__value="timeAttack";var q=T(O);q.value=q.__value="endless";var D=T(N,2),J=d(D),ne=T(d(J),2);Rt(ne,5,()=>(a(s),P(()=>Object.entries(a(s)))),Ut,(I,Y)=>{var Q=Vs(()=>us(a(Y),2));let oe=()=>a(Q)[0],se=()=>a(Q)[1];var _t=Ka();let gt;var ts=d(_t);X((rs,ns)=>{gt=le(_t,1,"rating-button svelte-14i971m",null,gt,rs),z(ts,ns)},[()=>({selected:se()}),()=>(oe(),P(()=>oe().charAt(0).toUpperCase()+oe().slice(1)))]),B("click",_t,()=>v(oe())),G(I,_t)});var ae=T(D,2),F=T(d(ae),2),te=d(F),ve=d(te);let de;var Se=d(ve),Ce=T(te,2);let ie;var Re=d(Ce),je=T(Re,2),De=d(je),Oe=T(F,2),we=d(Oe),ke=T(ae,2),Ue=T(d(ke),2),Be=T(h,2);{var at=I=>{var Y=Ja(),Q=d(Y);X(()=>z(Q,`‚ö†Ô∏è ${a(c)??""}`)),G(I,Y)};K(Be,I=>{a(c)&&I(at)})}var C=T(Be,2),V=d(C),Te=T(V,2),M=d(Te);X((I,Y,Q,oe,se)=>{z($,`${I??""}:${Y??""} per round`),de=le(ve,1,"toggle-button svelte-14i971m",null,de,Q),z(Se,a(l)?"ON":"OFF"),ie=le(Ce,1,"slider-container svelte-14i971m",null,ie,oe),Re.disabled=!a(l),z(De,se),z(we,a(l)?`Only posts with ${a(i)}+ upvotes`:"All posts regardless of upvotes"),Te.disabled=a(o),z(M,a(o)?"Loading...":"Start Game")},[()=>(a(r),P(()=>Math.floor(a(r)/60))),()=>(a(r),P(()=>String(a(r)%60).padStart(2,"0"))),()=>({active:a(l)}),()=>({disabled:!a(l)}),()=>(a(i),P(()=>a(i).toLocaleString()))]),B("click",g,_),Qt(S,()=>a(r),I=>b(r,I)),Ea(j,()=>a(n),I=>b(n,I)),B("click",ve,()=>b(l,!a(l))),Qt(Re,()=>a(i),I=>b(i,I)),Qt(Ue,()=>a(u),I=>b(u,I)),B("click",V,_),B("submit",y,Yn(p)),G(e,f),_e()}var Xa=L('<div class="error-state svelte-110vq8w"><p class="svelte-110vq8w">Failed to load image</p> <small class="svelte-110vq8w"> </small></div>'),ei=L('<div class="loading-state svelte-110vq8w"><div class="loading-spinner svelte-110vq8w"></div> <p class="svelte-110vq8w">Loading image...</p></div>'),ti=L('<img loading="eager"/> <!>',1),ri=L('<div class="pause-overlay svelte-110vq8w"><h2 class="svelte-110vq8w">Game Paused</h2></div>'),ni=L("<div><!> <!></div>");function si(e,t){pe(t,!1);const r=R(),n=R();let s=fe(t,"post",8),i=fe(t,"isPaused",8,!1),l=R(!1),u=R(!1),o=R();function c(){if(!a(r))return;b(l,!1),b(u,!1);const h=new Image;h.onload=()=>{b(l,!0),b(u,!1)},h.onerror=()=>{b(l,!1),b(u,!1)},h.src=a(r),h.complete&&h.naturalWidth>0&&(b(l,!0),b(u,!1))}function v(){b(l,!0),b(u,!1)}function m(){b(l,!1),b(u,!0)}U(()=>he(s()),()=>{b(r,s().sample?.url||s().file?.url||"")}),U(()=>he(s()),()=>{b(n,`Post ${s().id}`)}),U(()=>a(r),()=>{a(r)&&c()}),U(()=>(a(o),a(r)),()=>{a(o)&&a(r)&&a(o).complete&&a(o).naturalWidth>0&&(b(l,!0),b(u,!1))}),Fe(),ye();var p=ni();let _;var f=d(p);{var w=h=>{var E=Xa(),S=T(d(E),2),k=d(S);X(()=>z(k,`Post ID: ${he(s()),P(()=>s().id)??""}`)),G(h,E)},x=h=>{var E=ti(),S=Ze(E);let k;Wt(S,j=>b(o,j),()=>a(o));var $=T(S,2);{var N=j=>{var A=ei();G(j,A)};K($,j=>{a(l)||j(N)})}X(j=>{ft(S,"src",a(r)),ft(S,"alt",a(n)),k=le(S,1,"post-image svelte-110vq8w",null,k,j)},[()=>({loaded:a(l)})]),B("load",S,v),B("error",S,m),G(h,E)};K(f,h=>{a(u)?h(w):h(x,!1)})}var g=T(f,2);{var y=h=>{var E=ri();G(h,E)};K(g,h=>{i()&&h(y)})}X(h=>_=le(p,1,"post-viewer svelte-110vq8w",null,_,h),[()=>({paused:i()})]),G(e,p),_e()}var ai=L('<div class="spinner svelte-1ewstol"></div>'),ii=Nr('<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M2 12l7-7v4h11v6H9v4l-7-7z"></path></svg>'),li=L('<span class="recent-guess svelte-1ewstol"> </span>'),oi=L('<div class="recent-guesses svelte-1ewstol"><small class="svelte-1ewstol">Recent:</small> <!></div>'),ui=L('<div><form class="guess-form svelte-1ewstol"><div class="input-wrapper svelte-1ewstol"><input type="text" autocomplete="off" spellcheck="false" maxlength="50"/> <button type="submit" title="Submit guess (Enter)"><!></button></div> <!></form></div>');function ci(e,t){pe(t,!1);let r=fe(t,"disabled",8,!1),n=fe(t,"placeholder",8,"Enter your guess...");const s=Kn();let i=R(""),l=R(),u=R(!1),o=R([]);st(()=>{a(l)&&!r()&&a(l).focus()});function c(A){b(i,A.target.value.toLowerCase().replace(/\s+/g,"_"))}function v(){if(a(u)||r()||!a(i).trim())return;const A=a(i).trim();if(a(o).includes(A)){p("Already guessed!","warning");return}b(u,!0),b(o,[A,...a(o).slice(0,4)]),s("submit",{guess:A}),b(i,""),b(u,!1),a(l)&&a(l).focus()}function m(A){A.key==="Enter"?(A.preventDefault(),v()):A.key==="Escape"&&(b(i,""),a(l)&&a(l).blur())}function p(A,O){const q=document.createElement("div");q.textContent=A,q.className=`feedback-message ${O}`,q.style.cssText=`
      position: fixed;
      bottom: 6rem;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-secondary);
      color: var(--text-primary);
      padding: 0.5rem 1rem;
      border-radius: 4px;
      z-index: 1000;
      animation: feedbackSlide 2s ease-out forwards;
      border-left: 3px solid #FF9800;
    `;const D=document.createElement("style");D.textContent=`
      @keyframes feedbackSlide {
        0% { opacity: 0; transform: translate(-50%, 20px); }
        15%, 85% { opacity: 1; transform: translate(-50%, 0); }
        100% { opacity: 0; transform: translate(-50%, -20px); }
      }
    `,document.head.appendChild(D),document.body.appendChild(q),setTimeout(()=>{q.parentNode&&q.parentNode.removeChild(q),D.parentNode&&D.parentNode.removeChild(D)},2e3)}U(()=>(a(l),he(r())),()=>{a(l)&&!r()&&a(l).focus()}),Fe(),ye();var _=ui();let f;var w=d(_),x=d(w),g=d(x);let y;Wt(g,A=>b(l,A),()=>a(l));var h=T(g,2);let E;var S=d(h);{var k=A=>{var O=ai();G(A,O)},$=A=>{var O=ii();G(A,O)};K(S,A=>{a(u)?A(k):A($,!1)})}var N=T(x,2);{var j=A=>{var O=oi(),q=T(d(O),2);Rt(q,1,()=>(a(o),P(()=>a(o).slice(0,3))),Ut,(D,J)=>{var ne=li(),ae=d(ne);X(()=>z(ae,a(J))),G(D,ne)}),G(A,O)};K(N,A=>{a(o),P(()=>a(o).length>0)&&A(j)})}X((A,O,q,D)=>{f=le(_,1,"guess-input-container svelte-1ewstol",null,f,A),y=le(g,1,"guess-input svelte-1ewstol",null,y,O),ft(g,"placeholder",n()),g.disabled=r(),E=le(h,1,"submit-button svelte-1ewstol",null,E,q),h.disabled=D},[()=>({disabled:r()}),()=>({submitting:a(u)}),()=>({submitting:a(u)}),()=>(he(r()),a(i),a(u),P(()=>r()||!a(i).trim()||a(u)))]),Qt(g,()=>a(i),A=>b(i,A)),B("input",g,c),B("keydown",g,m),B("submit",w,Yn(v)),G(e,_),_e()}var fi=L('<div><div class="score-label svelte-d7zxm8">Score</div> <div class="score-number svelte-d7zxm8"> </div></div>');function vi(e,t){pe(t,!1);const r=R(),n=R();let s=fe(t,"score",8,0),i=R(0),l=R(0),u=R(!1);function o(_){if(a(u))return;b(l,_),b(u,!0);const f=a(i),w=_-f,x=Math.min(1e3,Math.abs(w)*2),g=Date.now(),y=()=>{const h=Date.now()-g,E=Math.min(h/x,1),S=1-Math.pow(1-E,3);b(i,Math.floor(f+w*S)),E<1?requestAnimationFrame(y):(b(i,_),b(u,!1))};requestAnimationFrame(y)}U(()=>(he(s()),a(l),a(u)),()=>{s()!==a(l)&&!a(u)&&o(s())}),U(()=>a(i),()=>{b(r,a(i).toString().length)}),U(()=>a(r),()=>{b(n,Math.max(2.5,5.5-a(r)*.2))}),Fe(),ye();var c=fi();let v;var m=T(d(c),2),p=d(m);X((_,f)=>{v=le(c,1,"score-display svelte-d7zxm8",null,v,_),Vn(m,`font-size: ${a(n)??""}rem;`),z(p,f)},[()=>({glowing:a(u)}),()=>(a(i),P(()=>a(i).toLocaleString()))]),G(e,c),_e()}var di=L('<small class="alias-info svelte-1djw5ek"> </small>'),mi=L('<div><span class="tag-name svelte-1djw5ek"> <!></span> <span class="tag-points svelte-1djw5ek"> </span></div>'),pi=L('<div class="empty-state svelte-1djw5ek"><p class="svelte-1djw5ek">No tags found yet...</p> <small class="svelte-1djw5ek">Start guessing!</small></div>'),_i=L('<div class="scroll-indicator svelte-1djw5ek"><div class="scroll-arrow svelte-1djw5ek">‚åÑ</div></div>'),gi=L('<div class="tag-list-container svelte-1djw5ek"><div><!> <!></div> <!> <div class="fade-edge svelte-1djw5ek"></div></div>');function hi(e,t){pe(t,!1);let r=fe(t,"correctGuesses",8),n=R([]),s=R(),i=R(!1),l=R(0),u=R(new Set);Oa(()=>{a(s)&&b(i,a(s).scrollHeight>a(s).clientHeight)});function o(){if(a(s)&&a(n).length>0){const g=a(s).querySelector(".tag-item:last-child");g&&g.scrollIntoView({behavior:"smooth",block:"nearest"})}}U(()=>(he(r()),a(u),a(n),a(l)),()=>{const g=new Set;if(Object.entries(r()).forEach(([h,E])=>{E&&E.forEach(S=>{g.add(S.tag)})}),Array.from(g).some(h=>!a(u).has(h))||a(n).length===0){const h=[];Object.entries(r()).forEach(([E,S])=>{S&&S.forEach(k=>{a(u).has(k.tag)||yn(l),h.push({tag:k.tag,actualTag:k.actualTag,category:E,points:k.score,order:a(l),wasFromAlias:k.wasFromAlias})})}),h.sort((E,S)=>E.points!==S.points?S.points-E.points:E.order-S.order),b(n,h),b(u,g)}}),U(()=>a(n),()=>{a(n).length>0&&setTimeout(o,100)}),Fe(),ye();var c=gi(),v=d(c);let m;var p=d(v);Rt(p,3,()=>a(n),g=>g.tag,(g,y)=>{var h=mi();let E;var S=d(h),k=d(S),$=T(k);{var N=O=>{var q=di(),D=d(q);X(()=>z(D,`‚Üí ${a(y),P(()=>a(y).actualTag)??""}`)),G(O,q)};K($,O=>{a(y),P(()=>a(y).wasFromAlias&&a(y).actualTag)&&O(N)})}var j=T(S,2),A=d(j);X(O=>{E=le(h,1,`tag-item ${a(y),P(()=>a(y).category)??""}`,"svelte-1djw5ek",E,O),z(k,`${a(y),P(()=>a(y).tag)??""} `),z(A,`+${a(y),P(()=>a(y).points)??""}`)},[()=>({"special-category":a(y).category==="artist"||a(y).category==="character","alias-tag":a(y).wasFromAlias})]),G(g,h)});var _=T(p,2);{var f=g=>{var y=pi();G(g,y)};K(_,g=>{a(n),P(()=>a(n).length===0)&&g(f)})}Wt(v,g=>b(s,g),()=>a(s));var w=T(v,2);{var x=g=>{var y=_i();G(g,y)};K(w,g=>{a(i)&&g(x)})}X(g=>m=le(v,1,"tag-list svelte-1djw5ek",null,m,g),[()=>({scrollable:a(i)})]),G(e,c),_e()}var bi=Nr('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-1kta319"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" class="svelte-1kta319"></path></svg>'),yi=Nr('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-1kta319"><path d="M8 5v14l11-7L8 5z" class="svelte-1kta319"></path></svg>'),wi=L('<div class="timer-container svelte-1kta319"><div><div class="time-text svelte-1kta319"> </div> <button class="pause-button svelte-1kta319"><!></button></div> <div class="timer-progress svelte-1kta319"><div></div></div></div>');function Si(e,t){pe(t,!1);const r=()=>Ge(dr,"$currentSession",n),[n,s]=$t();let i=fe(t,"timeRemaining",8),l=fe(t,"isRunning",12),u=fe(t,"onTimeUp",8),o=R(null),c=R(i()),v=R(!1),m=R(!1);st(()=>{l()&&p()}),ja(()=>{a(o)&&clearInterval(a(o))});function p(){a(o)||b(o,window.setInterval(()=>{yn(c,-1),a(c)<=0&&(b(c,0),_(),u()())},1e3))}function _(){a(o)&&(clearInterval(a(o)),b(o,null))}function f(q){const D=Math.floor(q/60),J=q%60;return`${D}:${J.toString().padStart(2,"0")}`}function w(){l(!l())}U(()=>he(i()),()=>{b(c,i())}),U(()=>a(c),()=>{b(v,a(c)<=10&&a(c)>0)}),U(()=>a(v),()=>{a(v)?b(m,!0):b(m,!1)}),U(()=>(he(l()),a(o)),()=>{l()&&!a(o)?p():!l()&&a(o)&&_()}),Fe(),ye();var x=wi(),g=d(x);let y;var h=d(g),E=d(h),S=T(h,2),k=d(S);{var $=q=>{var D=bi();G(q,D)},N=q=>{var D=yi();G(q,D)};K(k,q=>{l()?q($):q(N,!1)})}var j=T(g,2),A=d(j);let O;X((q,D,J)=>{y=le(g,1,"timer-display svelte-1kta319",null,y,q),z(E,D),ft(S,"title",l()?"Pause Game":"Resume Game"),O=le(A,1,"progress-bar svelte-1kta319",null,O,J),Vn(A,`width: ${a(c),r(),P(()=>a(c)/(r()?.settings.timeLimit||60)*100)??""}%`)},[()=>({warning:a(v),pulse:a(m)}),()=>(a(c),P(()=>f(a(c)))),()=>({warning:a(v)})]),B("click",S,w),G(e,x),_e(),s()}var ki=L('<div class="timer-container svelte-1bzum3d"><!> <button class="icon-button pause-button svelte-1bzum3d" title="Pause"> </button></div>'),Ti=L('<div class="loading-post svelte-1bzum3d"><p>Loading image...</p></div>'),xi=L('<div class="gameplay-screen svelte-1bzum3d"><div class="top-bar svelte-1bzum3d"><button class="icon-button quit-button svelte-1bzum3d" title="Quit Game">‚úï</button> <!> <button class="icon-button skip-button svelte-1bzum3d" title="Skip Round">‚è≠Ô∏è</button></div> <div class="game-grid svelte-1bzum3d"><div class="post-area svelte-1bzum3d"><!></div> <div class="scoreboard-area svelte-1bzum3d"><!> <!> <div class="tag-progress svelte-1bzum3d"><span class="progress-text svelte-1bzum3d"> </span></div></div></div> <!></div>');function Ei(e,t){pe(t,!1);const r=()=>Ge(za,"$isGameActive",i),n=()=>Ge(Zn,"$currentRound",i),s=()=>Ge(dr,"$currentSession",i),[i,l]=$t(),u=R(),o=R();let c=R(!1);function v(F){!a(c)&&r()&&me.submitGuess(F.detail.guess)}function m(){b(c,!a(c))}function p(){me.endRound()}function _(){confirm("Are you sure you want to quit? Your progress will be lost.")&&me.resetGame()}function f(){confirm("Skip to the next round?")&&me.endRound()}U(()=>n(),()=>{b(u,n()?.post.tags?Object.values(n().post.tags).flat().length:0)}),U(()=>n(),()=>{b(o,n()?.correctGuesses?Object.values(n().correctGuesses).flat().length:0)}),Fe(),ye();var w=xi(),x=d(w),g=d(x),y=T(g,2);{var h=F=>{var te=ki(),ve=d(te);{let Ce=$e(()=>(n(),P(()=>n()?.timeRemaining||0))),ie=$e(()=>!a(c));Si(ve,{get timeRemaining(){return a(Ce)},get isRunning(){return a(ie)},onTimeUp:p})}var de=T(ve,2),Se=d(de);X(()=>z(Se,a(c)?"‚ñ∂Ô∏è":"‚è∏Ô∏è")),B("click",de,m),G(F,te)};K(y,F=>{s(),P(()=>s()?.settings.mode!=="endless")&&F(h)})}var E=T(y,2),S=T(x,2),k=d(S),$=d(k);{var N=F=>{si(F,{get post(){return n(),P(()=>n().post)},get isPaused(){return a(c)}})},j=F=>{var te=Ti();G(F,te)};K($,F=>{n(),P(()=>n()?.post)?F(N):F(j,!1)})}var A=T(k,2),O=d(A);{let F=$e(()=>(n(),P(()=>n()?.score||0)));vi(O,{get score(){return a(F)}})}var q=T(O,2);{let F=$e(()=>(n(),P(()=>n()?.correctGuesses||{})));hi(q,{get correctGuesses(){return a(F)}})}var D=T(q,2),J=d(D),ne=d(J),ae=T(S,2);{let F=$e(()=>a(c)||!r());ci(ae,{get disabled(){return a(F)},$$events:{submit:v}})}X(()=>z(ne,`${a(o)??""} / ${a(u)??""} tags`)),B("click",g,_),B("click",E,f),G(e,w),_e(),l()}var Ci=L('<div class="countdown-screen svelte-1uy2ta0"><div class="countdown-container svelte-1uy2ta0"><h1 class="countdown-message svelte-1uy2ta0"> </h1></div></div>');function Ri(e,t){pe(t,!1);let r=4,n=R("6");st(()=>{const o=["6","2","1","GO!"];me.preloadCurrentRoundImage();const c=setInterval(async()=>{r-=1,r>=0?b(n,o[4-r-1]):(clearInterval(c),await me.startRound())},800);return()=>clearInterval(c)}),ye();var s=Ci(),i=d(s),l=d(i),u=d(l);X(()=>z(u,a(n))),G(e,s),_e()}var Ai=L('<div class="best-tag svelte-12se77s"><span class="label svelte-12se77s">best tag:</span> <span> </span> <span class="points svelte-12se77s"> </span></div>');function Xn(e,t){let r=fe(t,"tag",8),n=fe(t,"category",8),s=fe(t,"points",8);var i=Ai(),l=T(d(i),2),u=d(l),o=T(l,2),c=d(o);X(()=>{le(l,1,`tag-name ${n()??""}`,"svelte-12se77s"),z(u,r()),z(c,`+${s()??""}`)}),G(e,i)}var qi=L('<div class="post-id svelte-1ni21mi"> </div>'),Gi=L('<div><a target="_blank" rel="noopener noreferrer" class="post-link svelte-1ni21mi"><img class="post-image svelte-1ni21mi" loading="lazy"/> <!></a></div>');function Pi(e,t){pe(t,!1);let r=fe(t,"post",8),n=fe(t,"size",8,"medium"),s=fe(t,"showId",8,!0);ye();var i=Gi(),l=d(i),u=d(l),o=T(u,2);{var c=v=>{var m=qi(),p=d(m);X(()=>z(p,`#${he(r()),P(()=>r().id)??""}`)),G(v,m)};K(o,v=>{s()&&v(c)})}X(()=>{le(i,1,`post-thumbnail ${n()??""}`,"svelte-1ni21mi"),ft(l,"href",`https://e621.net/posts/${he(r()),P(()=>r().id)??""}`),ft(u,"src",(he(r()),P(()=>r().preview.url))),ft(u,"alt",`Post ${he(r()),P(()=>r().id)??""}`)}),G(e,i),_e()}var $i=L('<div><span class="tag-name svelte-5nmpdh"> </span> <span class="tag-points svelte-5nmpdh"> </span></div>'),Ii=L('<div class="category-section svelte-5nmpdh"><h3> </h3> <div class="tags-grid svelte-5nmpdh"></div></div>'),ji=L('<div class="round-breakdown svelte-5nmpdh"><div class="round-content svelte-5nmpdh"><h2 class="round-title svelte-5nmpdh"> </h2> <div class="post-section svelte-5nmpdh"><!></div> <div class="tags-section svelte-5nmpdh"></div></div></div>');function es(e,t){pe(t,!1);const r=R(),n=R();let s=fe(t,"roundData",8),i=fe(t,"roundNumber",8);function l(g,y){const h={general:100,artist:150,copyright:125,character:175,species:150,meta:75,lore:200,invalid:50};let E=0;for(let k=0;k<g.length;k++)E=(E<<5)-E+g.charCodeAt(k)&4294967295;const S=Math.abs(E)%50;return h[y]+S}function u(g,y){return(s().correctGuesses[y]||[]).includes(g)}function o(){return["artist","copyright","character","species","lore","general","meta"]}function c(){const g={};return Object.entries(s().post.tags).forEach(([y,h])=>{const E=y;let S=E;E==="invalid"&&(S="general"),g[S]||(g[S]=[]),h.forEach(k=>{g[S].push({tag:k,originalCategory:E})})}),g}U(()=>{},()=>{b(r,c())}),U(()=>a(r),()=>{b(n,o().filter(g=>a(r)[g]))}),Fe(),ye();var v=ji(),m=d(v),p=d(m),_=d(p),f=T(p,2),w=d(f);Pi(w,{get post(){return he(s()),P(()=>s().post)},size:"medium"});var x=T(f,2);Rt(x,5,()=>a(n),Ut,(g,y)=>{const h=$e(()=>(a(r),a(y),P(()=>a(r)[a(y)])));var E=Ii(),S=d(E),k=d(S),$=T(S,2);Rt($,5,()=>a(h),Ut,(N,j)=>{const A=$e(()=>(a(j),P(()=>l(a(j).tag,a(j).originalCategory)))),O=$e(()=>(a(j),P(()=>u(a(j).tag,a(j).originalCategory))));var q=$i();let D;var J=d(q),ne=d(J),ae=T(J,2),F=d(ae);X(te=>{D=le(q,1,`tag-item ${a(j),P(()=>a(j).originalCategory)??""}`,"svelte-5nmpdh",D,te),z(ne,(a(j),P(()=>a(j).tag))),z(F,`+${a(A)??""}`)},[()=>({guessed:a(O)})]),G(N,q)}),X(()=>{le(S,1,`category-title ${a(y)??""}`,"svelte-5nmpdh"),z(k,a(y)==="artist"?"Artists":a(y)==="copyright"?"Copyrights":a(y)==="character"?"Characters":a(y)==="species"?"Species":a(y)==="lore"?"Lore":a(y)==="general"?"General":a(y)==="meta"?"Meta":a(y))}),G(g,E)}),X(()=>z(_,`ROUND ${i()??""}`)),G(e,v),_e()}var Di=L('<div class="round-summary-screen svelte-ime345"><div class="top-bar svelte-ime345"><button class="icon-button quit-button svelte-ime345" title="Quit Game">‚úï</button> <button class="icon-button next-button glowing svelte-ime345" title="Next Round"><!></button></div> <div class="round-header svelte-ime345"><h1 class="round-title svelte-ime345"> </h1></div> <div class="content-container svelte-ime345"><div class="summary-page svelte-ime345"><div class="summary-content svelte-ime345"><div class="tags-count svelte-ime345"> </div> <div class="round-score svelte-ime345"> </div> <!> <div class="total-score svelte-ime345"><span class="label svelte-ime345">total:</span> <span class="score svelte-ime345"> </span></div> <div><span class="svelte-ime345">tag breakdown</span> <div class="arrow svelte-ime345">‚åÑ</div></div></div></div> <div class="breakdown-page svelte-ime345"><!></div></div></div>');function Oi(e,t){pe(t,!1);const r=()=>Ge(dr,"$currentSession",i),n=()=>Ge(Zn,"$currentRound",i),s=()=>Ge(Fa,"$canAdvanceRound",i),[i,l]=$t(),u=R(),o=R(),c=R(),v=R(),m=R(),p=R(),_=R(),f=R();let w=R(),x=0,g=!1;function y(){if(!a(o)?.correctGuesses)return null;let M=null,I=0;return Object.entries(a(o).correctGuesses).forEach(([Y,Q])=>{Q&&Q.forEach(oe=>{const se=h(oe,Y);se>I&&(I=se,M={tag:oe,category:Y,points:se})})}),M}function h(M,I){const Y={general:100,artist:150,copyright:125,character:175,species:150,meta:75,lore:200,invalid:50};let Q=0;for(let se=0;se<M.length;se++)Q=(Q<<5)-Q+M.charCodeAt(se)&4294967295;const oe=Math.abs(Q)%50;return Y[I]+oe}function E(M){if(g)return;const I=Math.sign(M.deltaY);I>0&&x===0?(S(),M.preventDefault()):I<0&&x===1&&(k(),M.preventDefault())}function S(){g||x===1||(g=!0,x=1,a(w)&&a(w).scrollTo({top:a(w).scrollHeight,behavior:"smooth"}),setTimeout(()=>{g=!1},500))}function k(){g||x===0||(g=!0,x=0,a(w)&&a(w).scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{g=!1},500))}function $(M){M.key==="Enter"?(M.preventDefault(),N()):M.key==="ArrowDown"&&x===0?S():M.key==="ArrowUp"&&x===1&&k()}function N(){me.nextRound()}function j(){confirm("Are you sure you want to quit? Your progress will be lost.")&&me.resetGame()}st(()=>(document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)})),U(()=>r(),()=>{b(u,(r()?.currentRound||0)+1)}),U(()=>n(),()=>{b(o,n())}),U(()=>a(o),()=>{b(c,a(o)?.post?.tags?Object.values(a(o).post.tags).flat().length:0)}),U(()=>a(o),()=>{b(v,a(o)?.correctGuesses?Object.values(a(o).correctGuesses).flat().length:0)}),U(()=>a(o),()=>{b(m,a(o)?.score||0)}),U(()=>r(),()=>{b(p,r()?.totalScore||0)}),U(()=>{},()=>{b(_,y())}),U(()=>n(),()=>{b(f,n()?.post?.tags&&Object.values(n().post.tags).flat().length>0)}),Fe(),ye();var A=Di(),O=d(A),q=d(O),D=T(q,2),J=d(D);{var ne=M=>{var I=Qr("‚è≠Ô∏è");G(M,I)},ae=M=>{var I=Qr("üèÅ");G(M,I)};K(J,M=>{s()?M(ne):M(ae,!1)})}var F=T(O,2),te=d(F),ve=d(te),de=T(F,2),Se=d(de),Ce=d(Se),ie=d(Ce),Re=d(ie),je=T(ie,2),De=d(je),Oe=T(je,2);{var we=M=>{Xn(M,{get tag(){return a(_),P(()=>a(_).tag)},get category(){return a(_),P(()=>a(_).category)},get points(){return a(_),P(()=>a(_).points)}})};K(Oe,M=>{a(_)&&M(we)})}var ke=T(Oe,2),Ue=T(d(ke),2),Be=d(Ue),at=T(ke,2);let C;var V=T(Se,2),Te=d(V);es(Te,{get roundData(){return n()},get roundNumber(){return a(u)}}),Wt(de,M=>b(w,M),()=>a(w)),X((M,I,Y)=>{z(ve,`ROUND ${a(u)??""}`),z(Re,`${a(v)??""}/${a(c)??""}`),z(De,M),z(Be,I),C=le(at,1,"scroll-prompt svelte-ime345",null,C,Y)},[()=>(a(m),P(()=>a(m).toLocaleString())),()=>(a(p),P(()=>a(p).toLocaleString())),()=>({visible:a(f)})]),B("click",q,j),B("click",D,N),B("wheel",de,E),G(e,A),_e(),l()}var Ni=L('<button class="icon-button home-button svelte-zsze6j" title="Return Home">üè†</button>'),Li=L('<div class="svelte-zsze6j"></div>'),Mi=L('<div class="new-best-badge svelte-zsze6j">New Best!</div>'),zi=L('<button class="play-again-button daily svelte-zsze6j">Return Home</button>'),Fi=L('<button class="play-again-button svelte-zsze6j" title="Play Again">Again</button>'),Ui=L('<div class="game-summary-screen svelte-zsze6j"><div class="top-bar svelte-zsze6j"><!> <button class="icon-button share-button svelte-zsze6j" title="Share Results">üì§</button></div> <div class="content-container svelte-zsze6j"><div class="summary-page svelte-zsze6j"><div class="summary-content svelte-zsze6j"><!> <div class="total-score svelte-zsze6j"> </div> <!> <div class="stats-summary svelte-zsze6j"><span class="tags-count svelte-zsze6j"> </span></div> <div class="action-buttons svelte-zsze6j"><!></div> <div><span class="svelte-zsze6j">round breakdown</span> <div class="arrow svelte-zsze6j">‚åÑ</div></div></div></div> <!></div></div>');function Bi(e,t){pe(t,!1);const r=()=>Ge(dr,"$currentSession",s),n=()=>Ge(Qn,"$userStats",s),[s,i]=$t(),l=R(),u=R(),o=R(),c=R(),v=R(),m=R(),p=R();let _=R(),f=0,w=!1;function x(){let C=null,V=0;return a(o).forEach(Te=>{Te.correctGuesses&&Object.entries(Te.correctGuesses).forEach(([M,I])=>{I&&I.forEach(Y=>{const Q=g(Y,M);Q>V&&(V=Q,C={tag:Y,category:M,points:Q})})})}),C}function g(C,V){const Te={general:100,artist:150,copyright:125,character:175,species:150,meta:75,lore:200,invalid:50};let M=0;for(let Y=0;Y<C.length;Y++)M=(M<<5)-M+C.charCodeAt(Y)&4294967295;const I=Math.abs(M)%50;return Te[V]+I}function y(C){if(w)return;const V=Math.sign(C.deltaY),Te=a(o).length;V>0&&f<Te?(h(f+1),C.preventDefault()):V<0&&f>0&&(h(f-1),C.preventDefault())}function h(C){if(!(w||C<0||C>a(o).length)){if(w=!0,f=C,a(_)){const V=C*a(_).clientHeight;a(_).scrollTo({top:V,behavior:"smooth"})}setTimeout(()=>{w=!1},500)}}function E(C){C.key==="Enter"?(C.preventDefault(),k()):C.key==="ArrowDown"&&f<a(o).length?h(f+1):C.key==="ArrowUp"&&f>0&&h(f-1)}function S(){me.resetGame()}function k(){r()&&me.restartWithSameSettings()}function $(){console.log("Share functionality to be implemented")}st(()=>(document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)})),U(()=>r(),()=>{b(l,r()?.totalScore||0)}),U(()=>(a(l),n()),()=>{b(u,a(l)>0&&a(l)>(n()?.bestScore||0))}),U(()=>r(),()=>{b(o,r()?.rounds||[])}),U(()=>a(o),()=>{b(c,a(o).reduce((C,V)=>C+Object.values(V.post.tags).flat().length,0))}),U(()=>a(o),()=>{b(v,a(o).reduce((C,V)=>C+Object.values(V.correctGuesses).flat().length,0))}),U(()=>{},()=>{b(m,x())}),U(()=>r(),()=>{b(p,r()?.settings.mode==="daily")}),Fe(),ye();var N=Ui(),j=d(N),A=d(j);{var O=C=>{var V=Ni();B("click",V,S),G(C,V)},q=C=>{var V=Li();G(C,V)};K(A,C=>{a(p)?C(q,!1):C(O)})}var D=T(A,2),J=T(j,2),ne=d(J),ae=d(ne),F=d(ae);{var te=C=>{var V=Mi();G(C,V)};K(F,C=>{a(u)&&C(te)})}var ve=T(F,2),de=d(ve),Se=T(ve,2);{var Ce=C=>{Xn(C,{get tag(){return a(m),P(()=>a(m).tag)},get category(){return a(m),P(()=>a(m).category)},get points(){return a(m),P(()=>a(m).points)}})};K(Se,C=>{a(m)&&C(Ce)})}var ie=T(Se,2),Re=d(ie),je=d(Re),De=T(ie,2),Oe=d(De);{var we=C=>{var V=zi();B("click",V,S),G(C,V)},ke=C=>{var V=Fi();B("click",V,k),G(C,V)};K(Oe,C=>{a(p)?C(we):C(ke,!1)})}var Ue=T(De,2);let Be;var at=T(ne,2);Rt(at,1,()=>a(o),Ut,(C,V,Te)=>{es(C,{get roundData(){return a(V)},roundNumber:Te+1})}),Wt(J,C=>b(_,C),()=>a(_)),X((C,V)=>{z(de,C),z(je,`${a(v)??""}/${a(c)??""} tags`),Be=le(Ue,1,"scroll-prompt svelte-zsze6j",null,Be,V)},[()=>(a(l),P(()=>a(l).toLocaleString())),()=>({visible:a(o).length>0})]),B("click",D,$),B("wheel",J,y),G(e,N),_e(),i()}var Vi=L('<div class="age-verification-overlay svelte-1iqyolj" role="dialog" aria-labelledby="age-title" aria-describedby="age-description"><div class="age-modal svelte-1iqyolj"><div class="modal-header svelte-1iqyolj"><h1 id="age-title" class="modal-title svelte-1iqyolj">Age Verification Required</h1></div> <div class="modal-body svelte-1iqyolj"><div class="warning-icon svelte-1iqyolj">‚ö†Ô∏è</div> <p id="age-description" class="age-message svelte-1iqyolj">This website contains mature content that may not be suitable for minors.</p> <p class="age-requirement svelte-1iqyolj"><strong>You must be 18 years or older to access this website.</strong></p> <p class="legal-notice svelte-1iqyolj">By clicking "I am 18 or older", you confirm that:</p> <ul class="confirmation-list svelte-1iqyolj"><li class="svelte-1iqyolj">You are at least 18 years of age</li> <li class="svelte-1iqyolj">You are legally permitted to view mature content in your jurisdiction</li> <li class="svelte-1iqyolj">You understand this site may contain adult-oriented material</li></ul></div> <div class="modal-footer svelte-1iqyolj"><button class="btn-adult svelte-1iqyolj" type="button" aria-describedby="age-description">I am 18 or older</button> <button class="btn-minor svelte-1iqyolj" type="button">I am under 18</button></div> <div class="modal-footer-notice svelte-1iqyolj"><small>This verification will be remembered for 30 days on this device.</small></div></div></div>');function Hi(e,t){pe(t,!1);const r=Kn();function n(p){if(p){const _={verified:!0,timestamp:Date.now(),expires:Date.now()+2592e6};localStorage.setItem("ageVerified",JSON.stringify(_)),r("verified",{isAdult:!0})}else window.location.href="https://www.google.com"}function s(p){p.preventDefault()}function i(p){p.key==="Escape"&&(p.preventDefault(),p.stopPropagation())}function l(p){p.preventDefault()}ye();var u=Vi();B("keydown",wr,i),B("scroll",It.body,s),B("wheel",It.body,s),B("touchmove",It.body,s),B("contextmenu",It.body,l);var o=d(u),c=T(d(o),4),v=d(c),m=T(v,2);B("click",v,()=>n(!0)),B("click",m,()=>n(!1)),G(e,u),_e()}var Yi=L('<div class="loading-screen svelte-1n46o8q"><div class="loading-spinner svelte-1n46o8q"></div></div>'),Wi=L('<main class="app svelte-1n46o8q"><!></main>');function Ki(e,t){pe(t,!1);const r=()=>Ge(nn,"$currentState",n),[n,s]=$t();let i,l=R(!1),u=R(!1);function o(){try{const f=localStorage.getItem("ageVerified");if(!f)return!1;const w=JSON.parse(f),x=Date.now();return w.verified&&w.expires>x?!0:(localStorage.removeItem("ageVerified"),!1)}catch{return!1}}function c(f){f.detail.isAdult&&(b(u,!0),b(l,!1))}st(()=>{b(u,o()),a(u)||b(l,!0);const f=nn.subscribe(w=>{w==="playing"?i=setInterval(()=>{me.tickTimer()},1e3):i&&clearInterval(i)});return()=>{f(),i&&clearInterval(i)}}),ye();var v=Wi(),m=d(v);{var p=f=>{Hi(f,{$$events:{verified:c}})},_=f=>{var w=it(),x=Ze(w);{var g=h=>{var E=it(),S=Ze(E);{var k=N=>{sn(N,{})},$=N=>{var j=it(),A=Ze(j);{var O=D=>{Za(D,{})},q=D=>{var J=it(),ne=Ze(J);{var ae=te=>{Ri(te,{})},F=te=>{var ve=it(),de=Ze(ve);{var Se=ie=>{Ei(ie,{})},Ce=ie=>{var Re=it(),je=Ze(Re);{var De=we=>{Oi(we,{})},Oe=we=>{var ke=it(),Ue=Ze(ke);{var Be=C=>{Bi(C,{})},at=C=>{sn(C,{})};K(Ue,C=>{r()==="gameSummary"?C(Be):C(at,!1)},!0)}G(we,ke)};K(je,we=>{r()==="roundSummary"?we(De):we(Oe,!1)},!0)}G(ie,Re)};K(de,ie=>{r()==="playing"?ie(Se):ie(Ce,!1)},!0)}G(te,ve)};K(ne,te=>{r()==="countdown"?te(ae):te(F,!1)},!0)}G(D,J)};K(A,D=>{r()==="setup"?D(O):D(q,!1)},!0)}G(N,j)};K(S,N=>{r()==="home"?N(k):N($,!1)})}G(h,E)},y=h=>{var E=Yi();G(h,E)};K(x,h=>{a(u)?h(g):h(y,!1)},!0)}G(f,w)};K(m,f=>{a(l)?f(p):f(_,!1)})}G(e,v),_e(),s()}ha(Ki,{target:document.getElementById("app")});
